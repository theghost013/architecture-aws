# Phase 3 ‚Äî Haute Disponibilit√© et Scalabilit√© Automatique

## Contexte
Apr√®s avoir d√©coupl√© l'application de la base de donn√©es en Phase 2, l'infrastructure restait vuln√©rable √† une instance unique. L'objectif de cette Phase 3 √©tait de rendre l'application **√©lastique** et **r√©siliente** en utilisant un groupe d'Auto Scaling (ASG) pilot√© par les m√©triques de performance.

## Ce qui a √©t√© fait

### 1. Configuration de l'Auto Scaling Group (ASG)
L'instance isol√©e a √©t√© remplac√©e par un groupe dynamique capable de s'auto-g√©rer :
- **Launch Template** : D√©finit la configuration standard des instances (AMI Ubuntu 22.04, type `t3.micro`, R√¥le IAM `LabInstanceProfile`).
- **Multi-AZ** : D√©ploiement r√©parti sur plusieurs zones de disponibilit√© (`us-east-1a`, `us-east-1b`) pour assurer la continuit√© de service en cas de panne de data center.
- **Capacit√©** : Configuration d'un minimum de 1 instance et d'un maximum de 3 instances simultan√©es.

### 2. Politique de Scaling (Target Tracking)
Mise en place d'une politique de type "Suivi de cible" pour automatiser la gestion des ressources :
- **M√©trique** : `CPUUtilization` (Utilisation moyenne du processeur).
- **Valeur cible** : Fix√©e √† **50%**.
- **Action** : Ajout automatique d'instances si la charge moyenne du groupe d√©passe le seuil pour maintenir la performance.

### 3. Monitoring CloudWatch
Le syst√®me s'appuie sur deux alarmes g√©n√©r√©es dynamiquement par la politique :
- **AlarmHigh** : D√©clench√©e si `CPU > 50%` pendant 3 points de donn√©es (3 minutes). Elle ordonne le "Scale-out" (ajout).
- **AlarmLow** : D√©clench√©e si `CPU < 9%` pendant 15 minutes. Elle ordonne le "Scale-in" (retrait) pour optimiser les co√ªts.

## üß™ Protocole de Test de Charge (Stress Test)
Pour valider la configuration et le d√©clenchement des alarmes, nous avons provoqu√© une mont√©e en charge artificielle sur l'instance active.

### Installation de l'outil
L'utilitaire `stress` a √©t√© install√© sur l'instance Ubuntu via le terminal :
```bash
sudo apt update && sudo apt install stress -y

### Simulation de charge lourde
Ex√©cution d'une commande saturant 100% des processeurs disponibles :

```bash
stress --cpu $(nproc) --timeout 900s

### Observation et Validation
- **CloudWatch** : La courbe `CPUUtilization` a franchi la ligne rouge des 50% (seuil critique).
- **√âtat d'Alarme** : L'alarme `AlarmHigh` est pass√©e en √©tat `In Alarm` apr√®s le d√©lai de validation.
- **R√©action ASG** : Une nouvelle instance a √©t√© provisionn√©e automatiquement dans la console EC2 (√©tat `Pending` puis `Running`).

### üõ†Ô∏è Probl√®mes rencontr√©s et solutions

| Probl√®me | Cause | Solution |
| :--- | :--- | :--- |
| **Command not found** | Tentative d'utilisation de commandes Amazon Linux (`yum`) sur un OS Ubuntu. | Utilisation du gestionnaire de paquets `apt` propre √† Ubuntu. |
| **Pas de nouvelle instance** | La charge CPU √©tait trop faible ou trop courte pour valider les 3 points de donn√©es. | Utilisation de la commande `stress` et abaissement temporaire du seuil cible √† 20% pour le test. |
| **D√©lai de r√©action** | CloudWatch n√©cessite plusieurs minutes de donn√©es cons√©cutives pour √©viter les faux positifs. | Observation patiente pendant 5 minutes pour confirmer le d√©clenchement de l'ASG. |